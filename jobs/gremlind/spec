---
name: gremlind

templates:
  config.yaml:            config.yaml
  bin/pre-start:          bin/pre-start
  bin/start-gremlind.sh:  bin/start-gremlind.sh
  bin/stop-gremlind.sh:   bin/stop-gremlind.sh

packages:
- gremlin

properties:
  gremlin.service_url:
    description: "Gremlin Control Plane URL"
    default: ""
  gremlin.identifier:
    description: "a string that uniquely identifies a Gremlin installation (defaults to the host's IP address)"
    default: ""
  gremlin.team_id:
    description: "ID of your Gremlin team"
    default: ""
  gremlin.team_secret:
    description: "the secret value (used by secret authentication only)"
    default: ""
  gremlin.team_certificate:
    description: "the public portion of the certificate-pair (required for signature auth only)"
    default: ""
  gremlin.team_private_key:
    description: "the private portion of the certificate-pair (required for signature auth only)"
    default: ""
  gremlin.tags:
    description: "key-value pairs that help you target this machine during experiments"
    default: {}
  gremlin.https_proxy:
    description: "the url of a proxy in between Gremlin and the Gremlin control plane"
    default: ""
  gremlin.ssl_cert_file:
    description: "the ssl certificate for your https proxy"
    default: ""
  gremlin.push_metrics:
    description: "set to false if you would like to disable system metrics used for experiment charting (defaults to true)"
    default: true
  gremlin.collect_processes:
    description: "enables/disables Process Collection (as of Linux Agent 2.25.0 defaults to true)"
    default: true
  gremlin.collect_dns:
    description: "collect dns data, data about network-bound dependencies is sent to Gremlin for service discovery (defaults to true)"
    default: true
  gremlin.iam_role:
    description: "role the agent uses to retrieve remote cloud config values"
    default: ""
  gremlin.install_user:
    description: "Linux user for Gremlin files"
    default: "gremlin"
  gremlin.install_group:
    description: "Linux group for Gremlin files"
    default: "gremlin"
  gremlin.install_bin_mode:
    description: "File mode for gremlin executables"
    default: "0750"
  gremlin.install_bin_capabilities:
    description: "Whether to set Linux caps on gremlin client"
    default: true

monit:
  name:     gremlind
  pid_file: "{{sys.run}}/gremlind/gremlind.pid"
  start:    "{{job.run}}/bin/start-gremlind.sh"
  stop:     "{{job.run}}/bin/stop-gremlind.sh"
  group:    gremlin

